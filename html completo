<!DOCTYPE html>
<html lang="pt-BR">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Loja Online</title>
	<style>
		body {
			font-family: Arial, sans-serif;
			background-color: #f4f4f4;
			margin: 0;
			padding: 20px;
		}

		header {
			text-align: center;
			background: #007bff;
			color: white;
			padding: 10px 0;
		}

		nav a {
			color: white;
			margin: 0 15px;
			text-decoration: none;
		}

		.section {
			max-width: 800px;
			margin: auto;
			background: white;
			padding: 20px;
			border-radius: 5px;
			box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
			margin-bottom: 20px;
		}

		.notificacao {
			position: fixed;
			top: 20px;
			right: 20px;
			background-color: #4CAF50;
			color: white;
			padding: 15px;
			border-radius: 5px;
			display: none;
			z-index: 1000;
		}

		.form-container input {
			margin-bottom: 10px;
			padding: 10px;
			border: 1px solid #ccc;
			border-radius: 4px;
			width: 100%;
		}

		button {
			background: #28a745;
			color: white;
			border: none;
			padding: 10px;
			cursor: pointer;
			transition: background 0.3s;
		}

		button:hover {
			background: #218838;
		}

		.perfil-imagem {
			max-width: 150px;
			border-radius: 50%;
			margin-bottom: 10px;
		}
	</style>
</head>

<body>

	<header>
		<h1>Loja Online</h1>
		<nav>
			<a href="#" onclick="mostrarHome()">Home</a>
			<a href="#" onclick="mostrarProdutos()">Produtos</a>
			<a href="#" onclick="mostrarCarrinho()">Carrinho</a>
			<a href="#" onclick="mostrarLogin()">Login</a>
			<a href="#" onclick="mostrarPerfil()" id="linkPerfil" style="display:none;">Perfil</a>
		</nav>
	</header>

	<div class="notificacao" id="notificacao"></div>

	<div class="section" id="home">
		<h2>Bem-vindo à nossa loja!</h2>
		<p>Explore nossos produtos e aproveite as melhores ofertas!</p>
	</div>

	<div class="section" id="produtos" style="display:none;">
		<h2>Produtos</h2>
		<div class="produtos-container" id="listaProdutos"></div>
	</div>

	<div class="section" id="carrinho" style="display:none;">
		<h2>Carrinho</h2>
		<div id="itens-carrinho"></div>
		<div id="total"></div>
		<button onclick="finalizarCompra()">Finalizar Compra</button>
	</div>

	<div class="section" id="login" style="display:none;">
		<h2>Login</h2>
		<div class="form-container">
			<input type="text" id="loginEmail" placeholder="Email" />
			<input type="password" id="loginSenha" placeholder="Senha" />
			<button onclick="login()">Entrar</button>
			<p>Ainda não tem uma conta? <a href="#" onclick="mostrarRegistro()">Registre-se</a></p>
		</div>
	</div>

	<div class="section" id="registro" style="display:none;">
		<h2>Registrar</h2>
		<div class="form-container">
			<input type="text" id="registroNome" placeholder="Nome" />
			<input type="text" id="registroEmail" placeholder="Email" />
			<input type="password" id="registroSenha" placeholder="Senha" />
			<button onclick="registrar()">Registrar</button>
			<p>Já tem uma conta? <a href="#" onclick="mostrarLogin()">Faça login</a></p>
		</div>
	</div>

	<div class="section" id="perfil" style="display:none;">
		<h2>Perfil do Usuário</h2>
		<img id="perfilImagem" class="perfil-imagem" src="https://via.placeholder.com/150" alt="Imagem de perfil" />
		<div id="informacoesPerfil"></div>
		<input type="file" id="uploadImagem" accept="image/*" onchange="atualizarImagem(event)" />
		<button onclick="editarPerfil()">Editar Nome</button>
	</div>

	<script>
		let carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];
        const usuarios = JSON.parse(localStorage.getItem('usuarios')) || [];
        let usuarioAtual = null;

        // Default user profile image
        const defaultImage = "https://via.placeholder.com/150";

        const produtos = [
            { nome: "Produto 1", preco: 29.99, imagem: "https://via.placeholder.com/150", descricao: "Descrição do Produto 1.", avaliacao: [] },
            { nome: "Produto 2", preco: 49.99, imagem: "https://via.placeholder.com/150", descricao: "Descrição do Produto 2.", avaliacao: [] },
            { nome: "Produto 3", preco: 19.99, imagem: "https://via.placeholder.com/150", descricao: "Descrição do Produto 3.", avaliacao: [] }
        ];

        function mostrarHome() {
            document.getElementById('home').style.display = 'block';
            document.getElementById('produtos').style.display = 'none';
            document.getElementById('carrinho').style.display = 'none';
            document.getElementById('login').style.display = 'none';
            document.getElementById('registro').style.display = 'none';
            document.getElementById('perfil').style.display = 'none';
        }

        function mostrarProdutos() {
            document.getElementById('home').style.display = 'none';
            document.getElementById('produtos').style.display = 'block';
            document.getElementById('carrinho').style.display = 'none';
            document.getElementById('login').style.display = 'none';
            document.getElementById('registro').style.display = 'none';
            document.getElementById('perfil').style.display = 'none';
            renderizarProdutos();
        }

        function mostrarCarrinho() {
            if (!usuarioAtual) {
                mostrarNotificacao("Você precisa estar logado para acessar o carrinho!");
                return;
            }
            document.getElementById('home').style.display = 'none';
            document.getElementById('produtos').style.display = 'none';
            document.getElementById('carrinho').style.display = 'block';
            document.getElementById('login').style.display = 'none';
            document.getElementById('registro').style.display = 'none';
            document.getElementById('perfil').style.display = 'none';
            renderizarCarrinho();
        }

        function mostrarLogin() {
            document.getElementById('home').style.display = 'none';
            document.getElementById('produtos').style.display = 'none';
            document.getElementById('carrinho').style.display = 'none';
            document.getElementById('login').style.display = 'block';
            document.getElementById('registro').style.display = 'none';
            document.getElementById('perfil').style.display = 'none';
        }

        function mostrarRegistro() {
            document.getElementById('home').style.display = 'none';
            document.getElementById('produtos').style.display = 'none';
            document.getElementById('carrinho').style.display = 'none';
            document.getElementById('login').style.display = 'none';
            document.getElementById('registro').style.display = 'block';
            document.getElementById('perfil').style.display = 'none';
        }

        function mostrarPerfil() {
            if (!usuarioAtual) {
                mostrarNotificacao("Você precisa estar logado para acessar o perfil!");
                return;
            }
            document.getElementById('home').style.display = 'none';
            document.getElementById('produtos').style.display = 'none';
            document.getElementById('carrinho').style.display = 'none';
            document.getElementById('login').style.display = 'none';
            document.getElementById('registro').style.display = 'none';
            document.getElementById('perfil').style.display = 'block';
            renderizarPerfil();
        }

        function renderizarPerfil() {
            const informacoesPerfil = document.getElementById('informacoesPerfil');
            informacoesPerfil.innerHTML = `
                <p><strong>Nome:</strong> ${usuarioAtual.nome}</p>
                <p><strong>Email:</strong> ${usuarioAtual.email}</p>
            `;
            document.getElementById('perfilImagem').src = usuarioAtual.imagem || defaultImage;
        }

        function atualizarImagem(event) {
            const arquivo = event.target.files[0];
            const reader = new FileReader();
            reader.onload = function (e) {
                usuarioAtual.imagem = e.target.result;
                localStorage.setItem('usuarios', JSON.stringify(usuarios));
                mostrarNotificacao("Imagem de perfil atualizada!");
                renderizarPerfil();
            };
            reader.readAsDataURL(arquivo);
        }

        function editarPerfil() {
            const novoNome = prompt("Digite seu novo nome:", usuarioAtual.nome);
            if (novoNome) {
                usuarioAtual.nome = novoNome;
                localStorage.setItem('usuarios', JSON.stringify(usuarios));
                mostrarNotificacao("Perfil atualizado com sucesso!");
                renderizarPerfil();
            }
        }

        function adicionarCarrinho(nome, preco, imagem) {
            carrinho.push({ nome, preco, imagem });
            salvarCarrinho();
            mostrarNotificacao(`${nome} adicionado ao carrinho!`);
        }

        function salvarCarrinho() {
            localStorage.setItem('carrinho', JSON.stringify(carrinho));
        }

        function renderizarCarrinho() {
            const itensCarrinho = document.getElementById('itens-carrinho');
            itensCarrinho.innerHTML = '';
            let total = 0;

            carrinho.forEach(item => {
                const itemCarrinho = document.createElement('div');
                itemCarrinho.innerHTML = `
                    <p>${item.nome} - R$ ${item.preco.toFixed(2)}</p>
                `;
                itensCarrinho.appendChild(itemCarrinho);
                total += item.preco;
            });

            document.getElementById('total').innerHTML = `<strong>Total: R$ ${total.toFixed(2)}</strong>`;
        }

        function finalizarCompra() {
            mostrarNotificacao("Compra finalizada com sucesso!");
            carrinho = [];
            salvarCarrinho();
            renderizarCarrinho();
        }

        function registrar() {
            const nome = document.getElementById('registroNome').value;
            const email = document.getElementById('registroEmail').value;
            const senha = document.getElementById('registroSenha').value;

            if (usuarios.find(usuario => usuario.email === email)) {
                mostrarNotificacao("Email já cadastrado!");
                return;
            }

            const novoUsuario = { nome, email, senha, imagem: defaultImage };
            usuarios.push(novoUsuario);
            localStorage.setItem('usuarios', JSON.stringify(usuarios));
            mostrarNotificacao("Registro realizado com sucesso!");
            mostrarLogin();
        }

        function login() {
            const email = document.getElementById('loginEmail').value;
            const senha = document.getElementById('loginSenha').value;
            const usuario = usuarios.find(usuario => usuario.email === email && usuario.senha === senha);

            if (usuario) {
                usuarioAtual = usuario;
                mostrarNotificacao(`Bem-vindo, ${usuario.nome}!`);
                document.getElementById('linkPerfil').style.display = 'inline'; // Mostrar link de perfil
                mostrarHome();
            } else {
                mostrarNotificacao("Email ou senha incorretos!");
            }
        }

        function mostrarNotificacao(mensagem) {
            const notificacao = document.getElementById('notificacao');
            notificacao.innerText = mensagem;
            notificacao.style.display = 'block';
            setTimeout(() => {
                notificacao.style.display = 'none';
            }, 3000);
        }

        // Mostrar a home por padrão ao carregar
        mostrarHome();
	</script>

</body>

</html>
